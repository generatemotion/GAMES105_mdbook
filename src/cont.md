P2   
# Outline  

 - Learning-based Character Animation (cont.)   
    - Motion Models   
    - Autoregressive models: PFNN   
    - Generative models   


P4   
# Learning Motion Models  

## é—®é¢˜çš„æ•°å­¦å»ºæ¨¡

\\(p(x)\\): probability that ğ’™ is a natural motion     

ç”±äº \\(p(x)\\) æ— æ³•ç”±è®¡ç®—å¾—å‡ºï¼Œæ‰€ä»¥ä»æ•°æ®å»å­¦ã€‚æ•°æ®å³ a set of example motions {\\(x_i\\)}âˆ¼ \\(p(x)\\) 

P5   
### æ•°å­¦æ¨¡å‹1

![](./assets/06a-01.png)   

> &#x2705; ä¸€ä¸ªposeå¯ä»¥ç”¨æ¯ä¸ªå…³èŠ‚çš„ä½ç½®è¡¨ç¤ºï¼Œä¹Ÿå¯ä»¥ç”¨æ¯ä¸ªå…³èŠ‚çš„æ—‹è½¬è¡¨ç¤ºã€‚å¦‚æœç”¨ä½ç½®çº¦æŸï¼Œæœ€åéœ€è¦é€šè¿‡IKå˜æˆæ—‹è½¬çš„çº¦æŸã€‚å¦‚æœç”¨æ—‹è½¬çº¦æŸï¼Œå°±éš¾ä»¥åšåˆ°éœ€è¦çº¦æŸä½ç½®çš„æ•ˆæœã€‚    
> &#x2705; P(X)åˆ¤æ–­æ•´ä¸ªåºåˆ—æ‰€æœ‰poseçš„è”åˆåˆ†å¸ƒæ˜¯å¦åˆç†ã€‚  

P7   
### æ•°å­¦æ¨¡å‹2


$$
p(X\mid z)=p(x_1,\dots ,x_T\mid z)
$$

$$
\begin{align*}
 ğ‘§: & \text{ control parameters} \\\\
  & \text{ latent variables} \\\\
  & â€¦â€¦ 
\end{align*}
$$


> &#x2705; å¯¹åŠ¨ä½œåºåˆ—çš„è¦æ±‚ï¼Œé™¤äº†åŠ¨ä½œåˆç†ï¼Œè¿˜è¦ç¬¦åˆç”¨æˆ·æœŸå¾…ï¼Œç”¨æˆ·è¦æ±‚å¯ä»¥æ˜¯æ˜¾å¼çš„ï¼Œä¾‹å¦‚å¾€å·¦èµ°ï¼›ä¹Ÿå¯ä»¥æ˜¯éšå¼çš„ï¼Œä¾‹å¦‚ä»¥è€äººçš„é£æ ¼èµ°ã€‚\\(z\\) ä»£è¡¨ç”¨æˆ·æ¡ä»¶ã€‚   
> &#x2705; P(X|z)åˆ¤æ–­åœ¨æ¡ä»¶zä¸‹æ•´ä¸ªåºåˆ—æ‰€æœ‰poseçš„è”åˆåˆ†å¸ƒæ˜¯å¦åˆç†ã€‚  

P8   

$$
(x_1,\dots ,x_T)=f(z)
$$

$$
\begin{align*}
 ğ‘§: & \text{ control parameters} \\\\
  & \text{ latent variables} \\\\
  & â€¦â€¦ 
\end{align*}
$$


> &#x2705; å¦‚æœæ¦‚ç‡åˆ†å¸ƒæ˜¯æ­£ç¡®çš„ï¼ŒåŸºäºè¿™ä¸ªåˆ†å¸ƒé‡‡æ ·èƒ½å¾—åˆ°ä¸€ä¸ªåˆç†çš„åŠ¨ä½œï¼Œä¸”æ»¡è¶³å‰ææ¡ä»¶ã€‚   

P14   
### æ•°å­¦æ¨¡å‹3

$$
p(X\mid z)=p(x_1,\dots ,x_T\mid z)
$$

$$
=p(x_1)\prod_{t}^{} p(x_t\mid x_{t-1},\dots ,x_1;z)
$$

\\(^\ast \\) The chain rule of conditional probabilities:   

$$
\begin{align*}
 p(x_1,x_2,x_3) & = p(x_2,x_3 \mid x_1)p(x_1) \\\\
   & = p(x_3 \mid x_2, x_1)p( x_2 \mid x_1)p(x_1)
\end{align*}
$$

> &#x2705; åºåˆ—åˆç† ï¼ å·²çŸ¥åºåˆ—ä¸­çš„å‰ \\(t-1\\) å¸§æ—¶ç¬¬ \\(t\\) å¸§åº”å½“åˆç†ã€‚  

P15  
é‡‡æ ·è¿‡ç¨‹ä¸ºï¼š

$$
x_t=f(x_{t-1},x_{t-2},\dots x_1;z)
$$


P17   
### æ•°å­¦æ¨¡å‹4

> &#x2705; å‡è®¾åŠ¨ä½œå…·æœ‰Markov æ€§ï¼ˆæ— è®°å¿†æ€§ï¼‰ 

$$
x_t=f(x_{t-1};z)
$$

Markov Property   


 
> &#x2705; \\(x_t\\) åªå— \\(x_{t-1}\\) å½±å“ï¼Œä¸ \\(t-1\\) ä¹‹å‰çš„åŠ¨ä½œæ— å…³ã€‚    



P18   
### Two Perspectives on a Motion Sequence

|æ•°å­¦æ¨¡å‹3|æ•°å­¦æ¨¡å‹4|
|---|---|
|![](./assets/06a-03.png) |![](./assets/06a-04.png) |
|![](./assets/06a-05.png) |![](./assets/06a-06.png) |
|&#x2705; æ— äº¤äº’æ— å®æ—¶é€šå¸¸ç”¨å‰è€…|&#x2705; æ¸¸æˆé‡Œé¢é€šå¸¸ç”¨åè€…|
|&#x2705; å·¦ï¼šç›´æ¥ç”Ÿæˆæ‰€æœ‰åŠ¨ä½œã€‚|&#x2705; å³ï¼šä¸€å¸§ä¸€å¸§åœ°ç”Ÿæˆã€‚   |
||&#x2705; å³æ— æ³•è€ƒè™‘æœªæ¥ï¼Œä¸èƒ½æ ¹æ®å°†è¦å‘ç”Ÿçš„äº‹æƒ…è°ƒæ•´å½“å‰çš„åŠ¨ä½œã€‚ï¼ˆè‡ªå›å½’ï¼‰| 


P25   

## æ•°å­¦æ¨¡å‹

$$
x_t=f(x_{t-1})
$$

![](./assets/06a-07.png)   


> &#x2705; ç”±äºåªå’Œä¸Šä¸€å¸§ç›¸å…³ï¼ŒäºŒå…ƒç»„ \\(ï¼ˆx_{t-1}ï¼Œx_tï¼‰\\) æ„æˆäº†ä¸€ä¸ªæ•°æ®ï¼Œå¸Œæœ›ä»é‡Œé¢å­¦åˆ°ä¸€äº›ä¿¡æ¯ã€‚   
> &#x2705; Neural Network ç›¸å…³éƒ¨åˆ†è·³è¿‡ã€‚  
> &#x2705; å½“å‰å…ˆä¸è€ƒè™‘ \\(z\\)    
> &#x2705; å¯ä»¥æŠŠå®ƒå½“ä½œä¼˜åŒ–é—®é¢˜æ¥è§£ã€‚  


P40   
## Ambiguity Issue   

$$
x_t=f(x_{t-1})
$$

![](./assets/06a-08.png)   


> &#x2705; ä½†æ˜¯ \\(x_t\\) å’Œ \\(x_{t-1}\\) çš„å…³ç³»æ˜¯æœ‰æ­§ä¹‰æ€§çš„ï¼Œæœ€åå­¦åˆ°ä¸€ä¸ªå¹³å‡çš„ \\(x_t\\).   
> &#x2705; å› ä¸º\\(x_{t-1}\\)ä¸\\(x_t\\)ä¸æ˜¯ä¸€å¯¹ä¸€çš„mappingå…³ç³»ã€‚  


P41   
## Hidden Variables

$$
x_t=f(x_{t-1};z)
$$

![](./assets/06a-09.png)    


> &#x2705; éœ€è¦åŠ å…¥ä¸€ä¸ªé¢å¤–çš„å˜é‡ï¼Œå¯ä»¥æ¥è‡ªç”¨æˆ·è¾“å…¥æˆ–å…ˆéªŒä¿¡æ¯ã€‚å…³é”®æ˜¯æ€ä¹ˆæ‰¾åˆ° \\(z\\)ï¼Œä½¿å­¦ä¹ æ¯”è¾ƒæœ‰æ•ˆã€‚   


P42  

# PFNN: Phase-Functioned Neural Networks

![](./assets/06a-10.png)   


P43  
## æ§åˆ¶ä¿¡å·


![](./assets/06a-11.png)  


> &#x2705; æ§åˆ¶å‚æ•°ï¼Œè¡¨æ˜ç”¨æˆ·å¸Œæœ›è§’è‰²æ€ä¹ˆèµ°ã€‚ç›¸ä½å‚æ•°ï¼Œè¡¨æ˜å½“å‰çš„çŠ¶æ€ã€‚     


P44  
## ç›¸ä½å‚æ•°

### ç›¸ä½å‚æ•°çš„å®šä¹‰

![](./assets/06a-12.png) 

> &#x1F446; phases of a walking gait cycle   

> &#x1F50E; *Gait disorders in adults and the elderly*   
Pirker and Katzenschlager 2017.    


P45  

$$
x_t=f(x_{t-1};z_t)  \quad \quad z_t=(c_t,\phi _t)
$$

![](./assets/06a-13.png)   


> &#x2705; è°ƒæ•´ç›¸ä½ä¸æ—¶é—´çš„å¯¹åº”å…³ç³»ï¼Œå¯å½±å“èµ°è·¯é€Ÿåº¦ã€‚   


P47    
### Mixture of Experts

|å¯¹ä¸“å®¶ç»“æœæ··åˆã€‚|å¯¹ä¸“å®¶æ¨¡å‹å‚æ•°æ··åˆã€‚|
|---|---|
|![](./assets/06a-14.png) |  ![](./assets/06a-15.png)   |
|\\(y=\sum_{i}^{} w_if(x;\theta _i)\\) | \\(y=f(x;\sum_{i}^{} w_i\theta _i)\\)<br> &#x2705; PFNN ä½¿ç”¨çš„æ˜¯è¿™ç§ã€‚ |

 


P49   
$$
x_t = f (x_{t-1}; c_t, \theta _ t = \sum _ {i}^{} w_i(\phi _t) \theta _i)
$$

![](./assets/06a-16.png)   


> &#x2705; ä¸“å®¶æ··åˆçš„æƒé‡ç”± phase å†³å®šã€‚  
> &#x2705; è®©æ¯ä¸ªä¸“å®¶ä¸“ä¸€åœ°å­¦ç‰¹å®šçš„ phase.   


P50   
### Cubic Catmull-Rom Splineçš„æ··åˆè®¡ç®—æ–¹å¼

![](./assets/06a-18.png)   

Cubic Catmull-Rom Spline:   

$$
\begin{align*}
 \theta _t & = \theta _2 \\\\
  & +\phi (-\frac{1}{2} \theta _1 + \frac{1}{2} \theta _3) \\\\
  & +\phi^2 (\theta _1-\frac{5}{2} \theta _2 + 2\theta _3-\frac{1}{2} \theta _4)\\\\
  & +\phi^3 (-\frac{1}{2} \theta _1+\frac{3}{2} \theta _2 - \frac{3}{2} \theta _3+\frac{1}{2} \theta _4)
\end{align*}
$$


> &#x2705; PFNN ç¼ºç‚¹ ï¼ˆ1ï¼‰è½»å¾®æ»‘æ­¥  ï¼ˆ2ï¼‰æ€¥è½¬èº«æ—¶æ— å‡é€Ÿã€‚   


P53   
## Advanced Phase Functions

|æ”¹è¿›å‰|æ”¹è¿›å|
|---|---|
|![](./assets/06a-19.png)    |![](./assets/06a-20.png)   |



> &#x2705; PFNN æœ‰ç¡®å®šçš„è±¡ä½åŠå¯¹åº”çš„æƒé‡ï¼Œä½†æ‰“ç¯®çƒç­‰åŠ¨ä½œï¼Œæˆ–åŠ¨ç‰©èµ°è·¯ï¼Œæ²¡æœ‰ç¡®å®šçš„è±¡ä½ã€‚  
> &#x2705; å› æ­¤ä¸å†æ˜¾ç¤ºåœ°å®šä¹‰ç›¸ä½å’Œæƒé‡ï¼Œæƒé‡ç”±å½“å‰çŠ¶æ€ä¸ç”¨æˆ·è¾“å…¥ç®—å‡ºæ¥ã€‚   



P55   
### ç›¸å…³å·¥ä½œ

|||
|---|---|
|![](./assets/06a-21.png)  | *SIGGRAPH 2018 <br> &#x2705; è®ºæ–‡ä¸€ï¼šé™¤è§’è‰²å§¿æ€ï¼Œè¿˜è€ƒè™‘è„šçš„é€Ÿåº¦ã€‚|
| ![](./assets/06a-22.png)  | *SIGGRAPH 2020 <br> &#x2705; è®ºæ–‡äºŒï¼šæŠŠä¸¤ä¸ªè„šæ‹†å¼€ï¼Œå¹¶è€ƒè™‘æ‰‹ï¼Œåˆ†åˆ«å®šä¹‰ç›¸ä½å‡½æ•°ã€‚|
| ![](./assets/06a-023.png)  | *SIGGRAPH 2022 <br> &#x2705; è®ºæ–‡ä¸‰ï¼šä»æ•°æ®ä¸­è‡ªåŠ¨å­¦åˆ°ç›¸ä½å‡½æ•°çš„ç»„åˆã€‚|

P57  
# Generative Models

![](./assets/06a-24.png)   


> &#x2705; ä¸å­¦ä¸¤å¸§å…³ç³»ï¼Œè€Œæ˜¯ç›´æ¥å­¦æ¦‚ç‡å¯†åº¦å‡½æ•°ã€‚   
> &#x2705; éš¾ç‚¹ï¼š(1) çœŸå® PDF å¯èƒ½éå¸¸å¤æ‚ (2) ä»ä¸€ä¸ª PDF ä¸­é‡‡æ ·ä¹Ÿå¾ˆéš¾ã€‚   
> &#x2705; PDF çš„ä½œç”¨æ˜¯åˆ¤æ–­åŠ¨ä½œæ˜¯ä¸æ˜¯çœŸçš„ã€‚   



P60   
## å¸¸è§å¥—è·¯

||||
|--|--|---|
|Generative Models|&#x2705; ä¸€èˆ¬ç”Ÿæˆå¼æ¨¡å‹æ˜¯è¿™æ ·çš„å½¢å¼ï¼šä»ä¸€ä¸ªç®€å•çš„ PDFï¼Œé€šè¿‡ \\(f(z)\\)ï¼Œæ˜ å°„åˆ° \\(p(x)\\). <br> &#x2705; å…³é”®æ˜¯ \\(f(z)\\) è¦å­¦å¥½ã€‚|![](./assets/06a-025.png)   |
| Variational Autoencoders |&#x2705; VAEï¼šå·²çŸ¥ä¸€äº›çœŸå®æ•°æ®é‡‡æ ·ï¼Œç”¨ Encoder ç¼–ç åˆ°ç®€å•åˆ†å¸ƒä¸Šçš„ç‚¹ï¼Œå†ç”¨Decoder å˜å›åŸåˆ†å¸ƒä¸Šçš„ç‚¹ã€‚<br> &#x2705; control VAE æ˜¯ VAEï¼‹æ§åˆ¶ï¼‹ç‰©ç†ä»¿çœŸ |![](./assets/06a-25.png)   |
| Generative Adversarial Network |&#x2705; GANï¼šæ—  Encoderï¼Œå¢åŠ ä¸€ä¸ªåˆ¤åˆ«å™¨ã€‚ <br> &#x2705; ASEã€AMP æ˜¯ GAN çš„æ§åˆ¶ç‰ˆæœ¬ã€‚ <br> &#x2705; RL ä¸ç»“åˆç‰©ç†éš¾ä»¥ workï¼Œå› ä¸ºéš¾ä»¥å®šä¹‰ reward.     |![](./assets/06a-26.png) |
| Normalizing Flows |&#x2705; æ ‡å‡†åŒ–æµï¼šç±»ä¼¼ VAEï¼Œä½¿ç”¨ä¸€ä¸ªå¯é€†å‡½æ•°ã€‚   |![](./assets/06a-27.png)   |
| Diffusion Models  |&#x2705; æ‰©æ•£æ¨¡å‹ï¼šå¤šæ¬¡ç¼–ç ä¸è§£ç ã€‚  <br> &#x2705; ä¸€ä¸ªåŠ¨ä½œåºåˆ—ç›¸å½“äºéšç©ºé—´é‡Œçš„ä¸€æ¡è½¨è¿¹ã€‚ |![](./assets/06a-28.png)   |

P62  
## ç›¸å…³å·¥ä½œ

|||
|---|---|
|![](./assets/06a-29.png)| [Ling et al. 2021 Character Controllers Using Motion **VAEs**]|
|![](./assets/06a-30.png) |[Henter et al. 2020, MoGlow: Probabilistic and Controllable Motion Synthesis Using **Normalising Flows**]<br>&#x2705; åˆ©ç”¨ RL ç­‰æ–¹æ³•ï¼Œåœ¨ lalent code ä¸Šç”Ÿæˆè½¨è¿¹ï¼Œå†æŠŠè½¨è¿¹è½¬åˆ°åŠ¨ä½œç©ºé—´ã€‚ |
|![](./assets/06a-31.png)|[Zhang et al. 2022, **arXiv**, MotionDiffuse: Text-Driven Human Motion Generation with **Diffusion Model**]|
|![](./assets/06a-32.png)|[Tevet et al. 2022, **arXiv**, MDM: Human Motion **Diffusion Model**]| 
||Ganimatorï¼šå°æ ·æœ¬ç”Ÿæˆ|| 


---------------------------------------
> æœ¬æ–‡å‡ºè‡ªCaterpillarStudyGroupï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ã€‚
>
> https://caterpillarstudygroup.github.io/GAMES105_mdbook/